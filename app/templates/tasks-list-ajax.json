{"draw":0,"recordsTotal":{{ tasks|length }},"recordsFiltered":{{ tasks|length }},"data":[
{% for task in tasks %}
  {% if task.staffing %}
    { "Task": "{{ task.taskname|stringformat }}", "taskid": {{ task.taskid }},
      "Staffing":
      {% if task.staffing %}
        {{ task.staffing[0].peopleid }},
      {% else %}
        "None",
      {% endif %}

    {% for staff in task.staffing %}
        "Cost": "{{ cost_total|currencyformat }}"}, { "Task": "{{ task.taskname }}",
        "taskid": {{ task.taskid }},
        "Staffing": {{ staff.peopleid }},
      "{{ staff.fiscalyear|fyformat }}staffingid": {{ staff.staffingid }},
      {% if staff.q1hours %} {% set q1 = staff.q1hours %} {% else %} {% set q1 = 0 %} {% endif %}
      {% if staff.q2hours %} {% set q2 = staff.q2hours %} {% else %} {% set q2 = 0 %} {% endif %}
      {% if staff.q3hours %} {% set q3 = staff.q3hours %} {% else %} {% set q3 = 0 %} {% endif %}
      {% if staff.q4hours %} {% set q4 = staff.q4hours %} {% else %} {% set q4 = 0 %} {% endif %}
      {% if staff.flexhours %} {% set flexhours = staff.flexhours %} {% else %} {% set flexhours = 0 %} {% endif %}
      "{{ staff.fiscalyear|fyformat }}": {{ staff.taskhours }},
      {% if loop.last %}
        "Cost": "{{ staff.staffcosts|currencyformat }}"}
      {% endif %}
    {% endfor %}{% if not loop.last %},{% endif %}
  {% endif %}
{% endfor %}
]}
