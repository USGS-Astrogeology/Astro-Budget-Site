<!DOCTYPE html>
<html>
    <head>
        <title>Proposal Budget Expense Type Listing</title>
        {% include 'menu-header.html' %}
    </head>
    {% for error in debug %}
      <pre>error.msg</pre>
    {% endfor %}
    <body>
        {% include 'menu-tags.html' %}
      <div class="container">
        <div id="title">
          <h2>List of Expense Types
          {% if g.user.admin %}
            <a href='javascript:void(0)' onClick="editDialog('/expensetypes/ajax/edit/0', null, $('#expensetypesTable'))" id='newButton'>New</a>
          {% endif %}
          <br>

          <button id="save_button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" onclick="save_row_preference($('#expensetypesTable').DataTable())">Save Row Preference</button>

          </h2>
        </div>
        <div id="warningDiv" class="ui-corner-all ui-state-highlight" style="width=100px;align=right;"></div>
        <div id="editDialog" class="ui-widget"></div>
        <div id="expensetypesTableDiv">
        <table id="expensetypesTable" class="display" cellspacing="0" width="100%">
          <thead><tr><th>Description</th></tr></thead>
        </table>
        </div>
      </div>

      <script type="text/javascript" charset="utf-8">
        function saveExpensetype() {
          $.post("index.php", $("#expensetypeForm").serialize())
            .always (function() {

              loadExpenseTypeTable(true);
              dialog.dialog("close");
              $("#warningDiv").html("<p>Updated</p>");
              $("#warningDiv").show();
            });
        }

        $(document).ready(function() {
          $("#newButton").button();
          $("#warningDiv").hide();
          loadTable('/expensetypes/ajax/list', false, $('#expensetypesTable'));
        } );
      </script>
    </body>
</html>
